<nav class="navbar navbar-expand-lg custom-navbar">
  <div class="container-fluid">
    <!-- Logo -->
    <a class="navbar-brand" href="#">
      <img
        src="/images/a-clock-that-has-a-watching-eye-in-the-center (1).png"
        alt="Logo"
        class="header-logo"
      />
    </a>
    <!-- Icono de usuario y botón de cerrar sesión -->
    <div class="user-actions">
      <i class="fa-solid fa-user-tie" (click)="toggleModal()"></i>
      <button class="logout-btn" (click)="logout()">Cerrar</button>

      <!-- Modal de actualización de contraseña -->
      <div class="modal" [ngClass]="{ 'show-modal': isModalOpen }">
        <div class="modal-content">
          <span class="close" (click)="closeModal()">&times;</span>
          <h2>Actualizar Contraseña</h2>

          <form [formGroup]="passwordForm" (ngSubmit)="updatePassword()">
            <div class="form-group">
              <label for="username">Usuario:</label>
              <input
                type="text"
                id="username"
                [value]="loggedUser?.username || 'No hay usuario'"
                readonly
                class="form-control"
              />
            </div>

            <div class="form-group">
              <label for="currentPassword">Contraseña Actual:</label>
              <input
                type="password"
                id="currentPassword"
                formControlName="currentPassword"
                class="form-control"
                placeholder="Ingrese contraseña actual"
              />
              <small
                class="error-message"
                [@If]="
                  passwordForm.get('currentPassword')?.invalid &&
                  passwordForm.get('currentPassword')?.touched
                "
              >
                La contraseña actual es requerida y debe tener al menos 6
                caracteres
              </small>
            </div>

            <div class="form-group">
              <label for="newPassword">Nueva Contraseña:</label>
              <input
                type="password"
                id="newPassword"
                formControlName="newPassword"
                class="form-control"
                placeholder="Ingrese nueva contraseña"
              />
              <small
                class="error-message"
                [@If]="
                  passwordForm.get('newPassword')?.invalid &&
                  passwordForm.get('newPassword')?.touched
                "
              >
                La nueva contraseña debe tener al menos 8 caracteres, incluir
                una letra, un número y un carácter especial
              </small>
            </div>

            <button
              class="save-btn"
              type="submit"
              [disabled]="passwordForm.invalid || !loggedUser"
            >
              Guardar Cambios
            </button>
          </form>
        </div>
      </div>

      <!-- Overlay para el fondo oscuro
      <div
        class="modal-overlay"
        [@If]="isModalOpen"
        (click)="closeModal()"
      ></div>-->
    </div>
  </div>
</nav>
